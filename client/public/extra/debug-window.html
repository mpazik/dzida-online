<script src="../lib/requirejs/require.js"></script>
<template id="debug-window">
    <button id="kill-character"><b>K</b> - kill character</button>
</template>
<script>
    (function (doc) {
        const GameUi = GAME_UI;
        require(['src/component/application', 'src/common/packet/backdoor-commands'], function (Application, Commands) {
            function killCharacter() {
                Application.sendCommands([Commands.killCharacter()]);
            }

            document.registerElement('debug-window', {
                prototype: Object.create(HTMLElement.prototype, {
                    createdCallback: {
                        value: function () {
                            var main = doc.getElementById("debug-window");
                            var mainElement = document.importNode(main.content, true);
                            this.appendChild(mainElement);
                        }
                    },
                    attachedCallback: {
                        value: function () {
                            document.getElementById("kill-character").addEventListener("click", killCharacter);
                        }
                    }
                })
            });

            GameUi.registerWindow("debug-window", {
                activateKeyBind: "D",
                keyBinds: {
                    "K": killCharacter
                }

            });
        });
    })(document.currentScript.ownerDocument);
</script>